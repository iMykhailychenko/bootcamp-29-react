{"version":3,"file":"static/js/452.782310b9.chunk.js","mappings":"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","sources":["services/comments.service.js","pages/SinglePostPage/CommentsPage/CommentForm/CommentForm.jsx","pages/SinglePostPage/CommentsPage/CommentList/CommentList.jsx","pages/SinglePostPage/CommentsPage/CommentsPage.jsx"],"sourcesContent":["import { privateApi, publicApi } from 'http/http';\n\nconst defaultParams = {\n  limit: 6,\n};\n\nexport const createNewCommentService = async (postId, body) => {\n  const { data } = await privateApi.post(`/posts/${postId}/comments`, body);\n  return data;\n};\n\nexport const getCommentsListService = async (postId, params = {}) => {\n  const { data } = await publicApi.get(`/posts/${postId}/comments`, {\n    params: { ...defaultParams, ...params },\n  });\n  return data;\n};\n\nexport const deleteCommentService = async commentId => {\n  return privateApi.delete(`/comments/${commentId}`);\n};\n","import { useState } from 'react';\n\nimport classNames from 'classnames';\nimport { toast } from 'react-toastify';\nimport { createNewCommentService } from 'services/comments.service';\n\nexport const CommentForm = ({ setComments }) => {\n  // TODO change to dynamic value\n  const postId = 10;\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [content, setContent] = useState('');\n\n  const handleChange = event => setContent(event.target.value);\n  const handleReset = () => setContent('');\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (!content.trim()) {\n      toast.error('Fill all required fields!');\n      return;\n    }\n\n    setIsLoading(true);\n    createNewCommentService(postId, { content })\n      .then(data => {\n        toast.success('You have successfully created a new comment!');\n        setComments(prev => ({ ...prev, data: [data, ...prev.data] }));\n        handleReset();\n      })\n      .catch(() => {\n        toast.error('Something went wrong!');\n      })\n      .finally(() => setIsLoading(false));\n  };\n\n  return (\n    <form action=\"#\" className=\"my-5\" onSubmit={handleSubmit}>\n      <label className=\"d-block form-label\">\n        <p>Post content</p>\n        <textarea\n          rows=\"5\"\n          value={content}\n          onChange={handleChange}\n          className=\"form-control\"\n          placeholder=\"Write your feedback\"\n        />\n      </label>\n\n      <button type=\"submit\" className={classNames('btn btn-primary my-2', isLoading ? 'disabled' : '')}>\n        {isLoading && <span className=\"spinner-grow spinner-grow-sm mr-2\" />}\n        Submit\n      </button>\n    </form>\n  );\n};\n","import { useCallback, useEffect, useState } from 'react';\n\nimport { formatDistance } from 'date-fns';\nimport { toast } from 'react-toastify';\nimport { deleteCommentService, getCommentsListService } from 'services/comments.service';\n\nexport const CommentList = ({ comments, setComments }) => {\n  // TODO change to dynamic value\n  const postId = 10;\n\n  const [isLoading, setIsLoading] = useState(true);\n\n  const fetchComments = useCallback(\n    () =>\n      getCommentsListService(postId)\n        .then(setComments)\n        .catch(() => {\n          toast.error('Something went wrong!');\n        }),\n    [postId, setComments],\n  );\n\n  useEffect(() => {\n    setIsLoading(true);\n    fetchComments().finally(() => setIsLoading(false));\n  }, [fetchComments]);\n\n  const handleDeleteComment = commentId => {\n    deleteCommentService(commentId)\n      .then(() => {\n        setComments(prev => ({ ...prev, data: prev.data.filter(item => item.id !== commentId) }));\n        toast.success('You have successfully deleted your comment!');\n      })\n      .catch(() => {\n        toast.error('Something went wrong!');\n      });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"spinner-border text-primary\">\n        <span className=\"visually-hidden\">Loading...</span>\n      </div>\n    );\n  }\n\n  if (!comments?.data?.length) {\n    return <p>No comments yet!</p>;\n  }\n\n  return (\n    <>\n      <ul className=\"list-group\">\n        {comments.data.map(comment => (\n          <li key={comment.id} className=\"list-group-item list-group-item-action py-4\">\n            <div className=\"d-flex w-100 justify-content-between\">\n              <small>{formatDistance(new Date(comment.created_at), new Date(), { addSuffix: true })}</small>\n            </div>\n\n            <div className=\"mb-4 mt-3\" dangerouslySetInnerHTML={{ __html: comment.content.replace(/\\n/g, '<br/>') }} />\n\n            <div className=\"btn-group\">\n              <button type=\"button\" className=\"btn btn-outline-danger\" onClick={() => handleDeleteComment(comment.id)}>\n                Delete comment\n              </button>\n              <button type=\"button\" className=\"btn btn-outline-primary\">\n                Edit comment\n              </button>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n};\n","import { useState } from 'react';\n\nimport { CommentForm } from './CommentForm';\nimport { CommentList } from './CommentList';\n\nexport const CommentsPage = () => {\n  const [comments, setComments] = useState(null);\n  return (\n    <>\n      <CommentForm setComments={setComments} />\n      <CommentList comments={comments} setComments={setComments} />\n    </>\n  );\n};\n"],"names":["defaultParams","limit","createNewCommentService","postId","body","privateApi","data","getCommentsListService","params","publicApi","deleteCommentService","commentId","CommentForm","setComments","useState","isLoading","setIsLoading","content","setContent","action","className","onSubmit","event","preventDefault","trim","then","toast","prev","catch","finally","rows","value","onChange","target","placeholder","type","classNames","CommentList","comments","fetchComments","useCallback","useEffect","length","map","comment","formatDistance","Date","created_at","addSuffix","dangerouslySetInnerHTML","__html","replace","onClick","id","filter","item","CommentsPage"],"sourceRoot":""}